{% load socialaccount %}
{% extends 'base.html' %}

{% block title %}Login â€“ Lune & Lilas{% endblock %}

{% block content %}

        <!-- Main Content -->
        <main class="flex-1">
            <section class="py-20 min-h-screen">
                <div class="max-w-md mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center fade-in">
                        <!-- Logout Icon -->
                        <div class="inline-flex items-center justify-center w-24 h-24 bg-lilac-100 rounded-full mb-8 float-animation">
                            <i data-lucide="log-out" class="h-12 w-12 text-lilac-600"></i>
                        </div>
                        
                        <!-- Logout Message -->
                        <h1 class="font-heading text-4xl mb-4 text-gray-800">You've been signed out</h1>
                        <p class="font-body text-lg text-gray-600 mb-8">Thank you for visiting Lune & Lilas. We hope to see you again soon!</p>
                        
                        <!-- Action Buttons -->
                        <div class="space-y-4">
                            <button onclick="window.location.href='login.html'" class="btn btn-primary btn-lg w-full button-glow gentle-hover">
                                Sign In Again
                            </button>
                            <button onclick="window.location.href='../index.html'" class="btn btn-secondary btn-lg w-full gentle-hover">
                                Continue Shopping
                            </button>
                        </div>
                        
                        <!-- Quick Actions -->
                        <div class="mt-16 grid grid-cols-1 gap-6">
                            <div class="card bg-white soft-shadow hover:soft-shadow-lg transition-all duration-300 cursor-pointer" onclick="window.location.href='../product_list.html'">
                                <div class="p-6 text-center">
                                    <div class="inline-flex items-center justify-center w-12 h-12 bg-blush-100 rounded-full mb-4">
                                        <i data-lucide="shopping-bag" class="h-6 w-6 text-blush-600"></i>
                                    </div>
                                    <h3 class="font-body text-lg font-semibold text-gray-800 mb-2">Explore Products</h3>
                                    <p class="font-body text-gray-600">Discover our collection of premium haircare</p>
                                </div>
                            </div>
                            
                            <div class="card bg-white soft-shadow hover:soft-shadow-lg transition-all duration-300 cursor-pointer" onclick="window.location.href='register.html'">
                                <div class="p-6 text-center">
                                    <div class="inline-flex items-center justify-center w-12 h-12 bg-sage-100 rounded-full mb-4">
                                        <i data-lucide="user-plus" class="h-6 w-6 text-sage-600"></i>
                                    </div>
                                    <h3 class="font-body text-lg font-semibold text-gray-800 mb-2">Create Account</h3>
                                    <p class="font-body text-gray-600">Join for exclusive offers and rewards</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer will be injected -->
        <div id="footer-container"></div>
    </div>

    <!-- Scripts -->
    <script src="../translations.js"></script>
    <script src="../js/page-templates.js"></script>
    <script src="../js/cart-manager.js"></script>
    <script src="../js/logout-utils.js"></script>
    <script>
        class LogoutPage {
            constructor() {
                this.currentLanguage = 'en';
                this.cartManager = new CartManager();
                this.init();
            }
            
            init() {
                LogoutUtils.performLogout();
                this.renderPage();
                this.setupEventListeners();
                this.cartManager.updateCartCount();
                LogoutUtils.initializeLucideIcons();
                LogoutUtils.setupAnimations();
            }
            
            renderPage() {
                document.getElementById('header-container').innerHTML = PageTemplates.createHeader();
                document.getElementById('footer-container').innerHTML = PageTemplates.createFooter();
            }
            
            setupEventListeners() {
                const cartToggle = document.getElementById('cart-toggle');
                if (cartToggle) {
                    cartToggle.addEventListener('click', () => this.cartManager.toggleCartSidebar());
                }
                
                const mobileCart = document.getElementById('mobile-cart');
                if (mobileCart) {
                    mobileCart.addEventListener('click', () => {
                        this.cartManager.toggleCartSidebar();
                        this.toggleMobileMenu();
                    });
                }
                
                const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
                if (mobileMenuToggle) {
                    mobileMenuToggle.addEventListener('click', () => this.toggleMobileMenu());
                }
                
                const langToggle = document.getElementById('lang-toggle');
                if (langToggle) {
                    langToggle.addEventListener('click', () => this.toggleLanguage());
                }
                
                const newsletterForm = document.getElementById('newsletter-form');
                if (newsletterForm) {
                    newsletterForm.addEventListener('submit', (e) => this.handleNewsletterSubmit(e));
                }
            }
            
            toggleMobileMenu() {
                const mobileMenu = document.getElementById('mobile-menu');
                const menuToggle = document.getElementById('mobile-menu-toggle');
                const icon = menuToggle?.querySelector('i');
                
                if (mobileMenu) {
                    mobileMenu.classList.toggle('hidden');
                    
                    if (icon) {
                        if (mobileMenu.classList.contains('hidden')) {
                            icon.setAttribute('data-lucide', 'menu');
                        } else {
                            icon.setAttribute('data-lucide', 'x');
                        }
                        LogoutUtils.initializeLucideIcons();
                    }
                }
            }
            
            toggleLanguage() {
                this.currentLanguage = this.currentLanguage === 'en' ? 'fr' : 'en';
                this.cartManager.currentLanguage = this.currentLanguage;
                const langButton = document.getElementById('lang-toggle');
                if (langButton) {
                    langButton.querySelector('span').textContent = this.currentLanguage.toUpperCase();
                }
            }
            
            handleNewsletterSubmit(e) {
                e.preventDefault();
                const form = e.target;
                
                form.innerHTML = `
                    <div class="flex items-center justify-center space-x-3 p-4 bg-sage-500/20 border border-sage-400/30 rounded-full backdrop-blur-sm">
                        <div class="w-5 h-5 bg-sage-300 rounded-full"></div>
                        <p class="text-sage-200 font-medium font-body">Welcome! Check your email for your 15% off code.</p>
                    </div>
                `;
                
                setTimeout(() => {
                    form.innerHTML = `
                        <div class="flex flex-col sm:flex-row gap-4">
                            <input type="email" placeholder="Enter your email address" required class="flex-1 h-12 px-6 bg-white/10 border border-lilac-300/20 text-white placeholder:text-lilac-200 focus:border-lilac-400 focus:ring-lilac-400/20 rounded-full backdrop-blur-sm font-body form-input">
                            <button type="submit" class="h-12 bg-blush-500 hover:bg-blush-600 text-white px-8 rounded-full soft-shadow gentle-hover font-body btn button-glow">Subscribe</button>
                        </div>
                    `;
                }, 3000);
            }
        }

        // Initialize the page
        let logoutPage;
        document.addEventListener('DOMContentLoaded', () => {
            logoutPage = new LogoutPage();
        });
    </script>
{% endblock %}